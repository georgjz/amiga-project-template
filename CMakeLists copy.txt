cmake_minimum_required(VERSION 3.13 FATAL_ERROR)

# Variables
if(CMAKE_SIZEOF_VOID_P EQUAL 8)
    set(PLATFORM_ARCH "64")
elseif(CMAKE_SIZEOF_VOID_P EQUAL 4)
    set(PLATFORM_ARCH "32")
endif()

project( vulkanapp
    VERSION 0.1.0
    DESCRIPTION "Vulkan template"
    LANGUAGES CXX )

# Extern libraries
add_subdirectory( extern )

# Them shaders
add_subdirectory( shaders )

# The actual game
add_executable( ${PROJECT_NAME} "" )
target_compile_features( ${PROJECT_NAME} PRIVATE cxx_std_17 ) 
target_compile_options( ${PROJECT_NAME} 
    PRIVATE -Wall -g )
add_dependencies( ${PROJECT_NAME} vertex-shader fragment-shader )
add_subdirectory( src )
target_include_directories( ${PROJECT_NAME} PUBLIC "include" )
target_link_libraries( ${PROJECT_NAME} glfw glm vulkan )

# custom target to copy the shaders
add_custom_target(
    copy-shaders
    COMMENT "Copying shaders"
    COMMAND ${CMAKE_COMMAND} -E copy_directory
    # ${CMAKE_CURRENT_SOURCE_DIR}/data/shaders ${CMAKE_BINARY_DIR}/shaders )
    ${CMAKE_CURRENT_SOURCE_DIR}/data ${CMAKE_BINARY_DIR}/data )